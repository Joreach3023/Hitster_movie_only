<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hitster Movie Only – Hidden Player</title>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <meta name="theme-color" content="#03030a" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Hitster" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" type="image/svg+xml" href="./assets/icons/icon.svg" />
  <link rel="apple-touch-icon" href="./assets/icons/icon.svg" />
  <link rel="mask-icon" color="#04f5ff" href="./assets/icons/icon.svg" />
  <link rel="apple-touch-startup-image" media="(orientation: portrait)" href="./assets/splash/splash-dark.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Press+Start+2P&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="./style.css" />
  <script src="https://sdk.scdn.co/spotify-player.js"></script>
</head>
<body>
  <div class="scene" aria-hidden="true">
    <div class="scene__grid"></div>
    <div class="scene__orb"></div>
  </div>
  <main class="wrap">
    <h1>Hitster Famille Labbé</h1>
    <div id="status" class="status">Ready</div>

    <div class="card">
      <div class="timer" id="timer" role="timer" aria-live="polite">
        <div class="timer__hearts" id="timerHearts" aria-hidden="true"></div>
        <span class="sr-only" id="timerValue">30</span>
      </div>
      <div class="controls">
        <button id="loginBtn">Login with Spotify</button>
        <button id="playBtn" disabled>Play</button>
        <button id="revealBtn" disabled>Indice (maintenir)</button>
        <button id="nextBtn" disabled>Next</button>
      </div>
      <label class="playback-toggle">
        <input type="checkbox" id="fullTrackToggle" />
        Lecture complète
      </label>
      <div class="reveal" id="reveal" hidden>
        <div id="title"></div>
        <div id="year"></div>
      </div>
    </div>

    <!-- Scanner QR intégré -->
    <section class="scanner">
      <button id="openScannerBtn">Scan QR</button>
      <div id="scannerPane" hidden>
        <div class="scanner-bar">
          <button id="closeScannerBtn">Fermer</button>
          <span id="scannerStatus">Caméra en attente…</span>
        </div>
        <video id="qrVideo" playsinline muted></video>
        <canvas id="qrCanvas" style="display:none;"></canvas>
      </div>
    </section>

    <p class="hint">
      Scan a QR that links to:<br />
      <code>https://your-github-username.github.io/hitster-geek/?t=spotify:track:6ZFbXIJkuI1dVNWvzJzown</code>
    </p>
  </main>

  <!-- Librairie de décodage QR -->
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>
  <script src="./app.js"></script>
</body>
</html>
